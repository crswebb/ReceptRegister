@page
@model ReceptRegister.Frontend.Pages.Auth.SetPasswordModel
@{
    ViewData["Title"] = "Set Password";
}
<h1 class="mb-3">Set Admin Password</h1>
@if (Model.Success)
{
    <div class="alert alert-success" role="alert">Password set and session created. Continue to the <a href="/auth/status" class="alert-link">auth status</a>.</div>
}
else if (Model.HasPasswordAlready)
{
    <div class="alert alert-info" role="alert">A password is already configured. <a href="/Auth/Login" class="alert-link">Login here</a>.</div>
}
else
{
    <p class="text-muted" id="pwHelp">Choose a strong password to protect your recipe index.</p>
    <form method="post" novalidate>
        <input type="hidden" name="Csrf" value="" />
        <div asp-validation-summary="ModelOnly" class="text-danger mb-3" role="alert"></div>
        <div class="mb-3">
            <label for="Password" class="form-label">Password</label>
            <input type="password" class="form-control" id="Password" name="Password" autocomplete="new-password" aria-describedby="pwHelp pwStrength pwSuggestions" value="" />
            <div id="pwStrength" class="form-text" aria-live="polite"></div>
            <div class="pw-meter" aria-hidden="true"><div id="pwBarFill" class="pw-meter-fill"></div></div>
            <div id="pwSuggestions" class="form-text pw-suggestions" aria-live="polite"></div>
            <span asp-validation-for="Password" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label for="ConfirmPassword" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="ConfirmPassword" name="ConfirmPassword" autocomplete="new-password" />
            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
        </div>
        <button type="submit" class="btn btn-primary">Set Password</button>
    </form>
}
@section Scripts {
    <script type="module" src="/js/set-password-strength.js"></script>
}
